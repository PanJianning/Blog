---
id: 1325
title: 我的量化哲学和策略
date: 2020-02-04T12:33:01+00:00
author: Eric Xu
comments: true
layout: post
guid: http://blog.youxu.info/?p=1325
permalink: /2020/02/04/my-leaps-strategy/
categories:
  - investment
tags:
  - deep-learning
comments: true
---

#### 缘起

博客的老读者一看标题就会说，这是一篇和我博客文章风格迥异的文章。这篇的确来自我自己。这是两年多的思考积累，写出来和大家分享。为了把我目前的思考讲清楚，先说一下我这几年的成长轨迹作为文章的起缘。

上次写文章还是 2017 年从事 AI 方向创业的时候写的——一晃三年了。上次的创业公司不算很成功，最后把 IP (知识产权) 卖给了一家公司。之后我在 [Reddit](https://www.reddit.com/) 担任了两年的机器学习工程总监 (Director of Engineering)。从头建立了 Reddit 的机器学习研发团队，把 Reddit 的整个 Feed 系统算法化，个人化。帮公司在平均时间，广告投放点击率上都实现了大于 50% 的质的飞跃。

这几年在人工智能领域的工作和创业，使我对整个深度学习的方向有了深刻的认识。我认为， GPU 上运行的深度学习框架是一个通用的计算平台，作用不仅限于机器学习。于是，业余时间，我开始尝试用 TensorFlow 这样的深度学习框架去解决一些非机器学习领域的问题。其中的一个领域，就是量化金融。

另一方面，三年里，我在职业和家庭人生这些方面都感到很满足很幸福。我有一个美好的家庭和一对健康成长的儿女。然而，这几年中，熟悉的朋友一个接一个肉身翻墙，国内发生的烦心事情似乎越来越多。我还有父母和兄弟在国内，有时候不想关心国内信息也不可能。有天我[在推特上说](https://twitter.com/mathena/status/1196968225524707328)，“山河破碎，豺狼当道；麦秀粟离，沉郁悲呛”。一方面幸福平和，一方面沉郁悲呛，这样的心境于人于己都不健康。

某天我突然想到古人的 “国家不幸诗家幸，赋到沧桑句便工”，突然想通了。当年遗山老人没有高级金融工具，只能悲愤而做岐阳三首，成为一代诗家。如今我们所在的时代给予了我们许多表达和应对“沉郁悲呛”的方法。我的策略是用当今的数学物理和金融工具，以求“量化沧桑尽微力”。这样微弱的改变，总比躲进小楼成一统好一些。是为缘起。


#### 大变局时代

这是一个大变局的时代。技术本身更快地创造和摧毁资本价值。熊彼得提出的创造性破坏每天都在加速。   30 年前，S&P 500 公司在榜单里待的时间[平均是 33 年](https://www.innosight.com/insight/creative-destruction/)（出入榜很好地反映了价值和财富的创造和破坏），如今已经减少到 24 年，到 2027 年预测会继续减少到 12 年。 这方面例子比比皆是。如 [Charles Schwab](https://en.wikipedia.org/wiki/Charles_Schwab_Corporation) ，30 年前首先开创低价股票交易模式，破坏了当时的高价股票交易代理商，如今面对 [Robinhood](https://robinhood.com/) 这种免费交易对手的创造性破坏，也被迫推出免费股票交易。当年的创造性破坏者如今被新一代的公司创造性破坏。

我相信技术是经济增长的内生动力。技术的进步是非连续的，这意味着对财富的创造和破坏也是非连续的。刚刚过世的哈佛管理学教授 [Clayton Christensen](https://en.wikipedia.org/wiki/Clayton_Christensen) 在[「创新者困境」](https://en.wikipedia.org/wiki/The_Innovator%27s_Dilemma) 里描述了这种非连续性：行业领先的公司似乎忽然之间就被小公司超越。上面我们说到 S&P 500 榜单公司的平均寿命越来越短，其实是技术的破坏创造力越来越大的体验。

大变局也意味着大泡沫，一些公司看上去代表了新经济新技术，实际上内里全是泡沫，只是故事讲得好。所幸的是，物理学已经给我们指点了一套识别泡沫的方法。

#### 大变局时代的物理金融方法

几十年前，我们还可以把技术当成外部变量来处理定量模型。随着技术对财富的加速创造和破坏，我们很难将技术排除在模型之外还能准确地计算资产价格。把技术纳入财富的创造和破坏模型，即抛弃传统的微观和宏观经济学的框架，拥抱复杂系统科学（物理学），拥抱[非遍历经济学](https://ergodicityeconomics.com/)，拥抱内生经济模型。

用复杂系统（相变）的眼光来看金融市场——随着整个市场的自动化程度越来越高，相变也越来越频繁。这样频繁的相变意味着两点：

 - 第一，我们需要用复杂系统的数学物理方法来量化金融市场，而不是传统的随机游走理论。如「黑天鹅」的作者 Nassim Nicholas Taleb，一直在强调不要用随机游走的方法来量化市场。

 - 第二，传统的价值投资（以巴菲特为代表）可投资的领域在变小。巴菲特的投资哲学着力寻找那些高质量，未来一二十年有稳定增长的公司。但随着破坏性创造越来越频繁，这些股票越来越难找。事实也是如此，Berkshire Hathaway 如今手握大笔现金（总计 1280 亿美元），近四年来都没有出手任何大的投资标的，而是回购自己的股票支撑价值。

总的来说，新的内生经济增长方式决定了判断金融资产价值的方式要超越简单的未来现金流折现，因为未来现金流折现蕴含着连续性假设，而如今的外来是一个不连续的方程，尤其是在技术变革，动力转换和泡沫成长破碎的时候。这些非连续的事件正是可以让收益超过市场平均的机遇。

#### 模型的业绩

通过去年一年的实际操作，结合上面说的物理方法，我认为我找到了一套行之有效的量化哲学和策略。我把这个方法很粗暴地命名为 **“大跃进” / Great LEAPS**。我自己管理的对冲基金也就暂且叫做 大跃进基金。 后面我再讲命名后面的一些逻辑。

在阐述具体方法之前我讲一下我去年的成果。去年一年我总资产的年化收益约为 45%。 今年第一个月收益接近 14%。 所有收益均采用量化模型，而非基本面分析，技术分析等等。交易则由我手动执行。因为不是高频交易，手动执行和自动执行差别不大。

去年我最大部分收益来自于做空 NIO （蔚来汽车）。模型从它的股价大跃进里发现泡沫。我于 2019 年 1 月 19 日购买 N 手 2019 年 8 月 16 日到期的 PUT 期权，行权价格为 $14，购买价格为 $7.80/share。 至 2019 年 8 月 16 日，NIO 股价跌至 $2.96, 我以 $11.04/share 卖出，收益率为 146%。 其他操作收益不等，不占主要。

今年（2020年）第一个月我最大的收益来自 LK (瑞幸咖啡)。同样使用量化模型找到泡沫。我于 2020 年 1 月 10 日购买 N 手 2021 年 1 月 15 日到期的 PUT 期权，行权价格为 $35.00。购买价格为 $9.00。至今 LK 股价已跌落至 $31.36，而该期权价格升至 $13.40，如果今日卖出收益率为 148%。事实上，模型判断 LK 还会继续下跌至 $0。

以上两例，尽管都和中概有关，但模型本身没有特别的给中概股权重。随着中国经济的失速，这样的机会还有很多。在中国，增速的技术遇到了制度和人口结构变化，呈现出了独特的破坏式创造的风格。许多人主张做空中国（人民币，ETF，或者一些夕阳产业）。我的信念是这种笼统做空方式收益风险比过低。做空中国本身已经是一个有效市场，况且体制本身的行为很难在量化模型中刻画出来。

#### 用深度学习的牛刀来屠定量金融的龙

上面我提到，大变局伴随的是物理的相变过程。然而，从短期趋势来说，发生的时间不可预测，也不可计算。这几天，许多做空 Tesla 的人都被其股价上扬震惊了。事实上，短期市场永远是一个难以预测的怪兽。短期要切准时间太难了。

然而，从中长期来看，我们有较好的预测相变的办法。比如， [LPPLS](https://en.wikipedia.org/wiki/Didier_Sornette#The_JLS_and_LPPLS_models) 模型可以预测泡沫的破碎。然而，现有的模型优化手段非常粗糙（遗传算法），很难稳定收敛到一个可信的值。在这方面，华尔街和物理学家还没能普及更好的模型优化算法。其实更好的模型优化算法已经出现，即现有的深度学习框架。这里，并不是要用深度学习/神经网络本身来做定量金融，而是用深度学习领域的技术工具。这是一个非常独特的机遇，因为：

一方面传统的华尔街/定量公司已有一套完善的定量工具，但这些工具的模型表达和优化能力远不及 TensorFlow。另一方面，懂得 TensorFlow 这些工具的人目前都忙于做人工智能，还很少有人来捕捉定量金融的机会。TensorFlow 框架在定量金融上可以做许多事情。我觉得以后定量金融会逐步转移到这种全面的计算框架上来。我不怕写出来和大家分享这个“秘密”，因为目前能够把两者都玩转起来的能太少，我宁愿这样的人多一些才好。 同时，我认为未来几年，这个“秘密”武器有一定的先发优势，可以在一些模型上比它人获得更加好的结果和汇报。

对我来说，TensorFlow 和 GPU 可以用来预测和捕捉复杂系统的相变时刻。这样的预测必然是一种近似，而非科学预测。所以，问题是，有了相变（比如泡沫大概什么时候破碎）的信息，如何从金融市场中套利？知道信息本身只是10%的工作，用正确的工具来套利是 90% 的工作。

通过这一年的实践我找到了一个适合的工具，这个工具的名字叫 LEAPS，即长期期权。而在实践中，这是一个它山之石，长权短用，寻求高额回报。

#### LEAPS 工具

[LEAPS](http://www.cboe.com/education/getting-started/quick-facts/leaps) 是一种特殊的期权，这种期权的过期日期往往在一年开外。因为美式期权的特点，意味着你有很长的时间来等待收益。当然，世界上没有便宜的午餐，长时间意味着更高的期权价格，也意味着小的 [Theta](https://www.investopedia.com/terms/t/theta.asp) 值。

做空并不是一件复杂的事情。然而，价格下行或许能立即发生，或许还要等几个月，或许半年内都不会发生。这正是许多做短期看空期权的人需要冒的风险，也是许多人倾家荡产的原因。在我看来，用短期期权去赌股价的上下，除非有额外的信息，否则真的是赌博。

在随机游走的假设下，LEAPS 本身也是公平的赌博。然而，当 LEAPS 和物理金融方法以及 TensorFlow 模型结合在一起，LEAPS 就有了一个新的维度： 用随机游走的量化模型计算出的期权价格 (现有的 LEAPS 定价策略)，与用物理方法计算出的模型相比，在相变前期，后者能更加准确地刻画相变，更加符合金融市场的实际情况。方法本身没有好坏，差别在假设上。我相信，能够导出股价变化遵循 Power Law 分布的物理量化模型，比不能够导出 Power Law 的模型更加准确地捕捉相变。

一般专业交易者把 LEAPS 当成长期风险对冲工具。我的用法可以算是“直板横打”。我将 LEAPS 当成低风险的短期收益工具。以看空期权为例，在股价不变前提下，通过不断计算 LEAPS 的剩余价值，我可以控制时间流逝带来的折损。如果泡沫不破碎，则在其时间价值迅速贬值之前出售。如果等到泡沫破碎，则出售换取超额收益。当然，如果股价上涨，看空期权必然下跌，所幸的是，因为没有要紧的时间压力，你有选择等待的空间。

在这种策略下，收益不是从每日交易中得到，而是在等待中出现。这里的秘密是： Theta 函数随时间的变化是非线性的。在股价不变的前提下，LEAPS 前期的贬值极低，刨去市场无风险收益率，在前六个月几乎可以算是免费持有。

这里细节上还有一些有意思的东西，比如，依赖于 [Hamiltonian Monte Carlo](https://en.wikipedia.org/wiki/Hamiltonian_Monte_Carlo)  方法，我们可以用 MCMC 和一套新的假设给 LEAPS 期权定价。一些原本不能做到的套利行为也可以在 TensorFlow + GPU 的帮助下完成。

#### 结语

说到这里，我把这套对冲策略和基金命名为 **Great LEAPS/大跃进** 也就明白了。我的策略就是用量化的方法寻找那些看上去好像股价大跃进，其实内里土法炼钢的股票。找到后，用 LEAPS 策略套利。这套工具链和逻辑链能够成立，依赖于时代的机遇和泡沫，依赖于众多物理学家，数学家和机器学习工程师所构建的基础。

限于篇幅许多理论和实践没有一一展开。我一直相信，如果勤于思考的话，钱会来敲门。基于此，我宁愿写出来和人分享我的思考，希望更多的人知道模型和量化的力量。